---
layout: post
title: 通过try catch模拟延迟获取未知对象的方法
categories: Javascript
date: 2017-06-24 09:50:31
tags:
    - Javascript
    - 延迟获取对象
    - 未知对象获取
    - 延迟获取数据
---

有时候一些初始化数据异步获取，当页面`初始化`完成，但是数据还未正常初始化，导致页面错误，可以用下面的简单递归方式获取



    //模拟数据延迟
    var a;
    setTimeout(function () {
        a = {
            name: 1,
            age: 2
        };
    }, 5000); //延迟5秒初始化数据

    //递归自动执行
    (function () {
        try {
            // a不是对象时会抛出错误
            a.name;
        } catch (e) {
            //延迟再试一次~
            setTimeout(arguments.callee, 50);
            return;
        }
        // 没有错误就表示数据获取正常 5秒后正常打印数据
        console.log(a);
    })();